<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Support - ShiurPod</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f8f7f4; color: #2c2c2c; line-height: 1.7; -webkit-font-smoothing: antialiased; }
  .container { max-width: 720px; margin: 0 auto; padding: 48px 24px 80px; }
  .back-link { display: inline-flex; align-items: center; gap: 6px; color: #6b7280; text-decoration: none; font-size: 14px; margin-bottom: 32px; }
  .back-link:hover { color: #2c2c2c; }
  h1 { font-size: 32px; font-weight: 700; color: #1a1a1a; margin-bottom: 8px; }
  .subtitle { color: #6b7280; font-size: 16px; margin-bottom: 40px; }
  h2 { font-size: 20px; font-weight: 600; color: #1a1a1a; margin-top: 36px; margin-bottom: 12px; }
  p { font-size: 15px; color: #4b5563; margin-bottom: 16px; line-height: 1.8; }
  .card { background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 24px; margin-bottom: 16px; }
  .card h3 { font-size: 17px; font-weight: 600; color: #1a1a1a; margin-bottom: 8px; }
  .card p { margin-bottom: 0; }
  .faq-item { margin-bottom: 24px; }
  .faq-item h3 { font-size: 16px; font-weight: 600; color: #1a1a1a; margin-bottom: 6px; }
  .faq-item p { font-size: 14px; color: #6b7280; margin-bottom: 0; }
  .contact-form { background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 28px; margin-top: 24px; }
  .form-group { margin-bottom: 18px; }
  .form-group label { display: block; font-size: 14px; font-weight: 500; color: #374151; margin-bottom: 6px; }
  .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 10px 14px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 15px; font-family: inherit; color: #1a1a1a; outline: none; transition: border 0.2s; }
  .form-group input:focus, .form-group textarea:focus, .form-group select:focus { border-color: #3b82f6; }
  .form-group textarea { resize: vertical; min-height: 120px; }
  .submit-btn { display: inline-flex; align-items: center; gap: 8px; padding: 12px 24px; background: #3b82f6; color: #fff; border: none; border-radius: 8px; font-size: 15px; font-weight: 500; cursor: pointer; transition: background 0.15s; }
  .submit-btn:hover { background: #2563eb; }
  .submit-btn:disabled { opacity: 0.5; cursor: not-allowed; }
  .success-msg { background: #d1fae5; border: 1px solid #6ee7b7; border-radius: 8px; padding: 12px 16px; color: #065f46; font-size: 14px; margin-bottom: 16px; display: none; }
  .error-msg { background: #fee2e2; border: 1px solid #fca5a5; border-radius: 8px; padding: 12px 16px; color: #991b1b; font-size: 14px; margin-bottom: 16px; display: none; }
  .footer { margin-top: 48px; padding-top: 24px; border-top: 1px solid #e5e7eb; color: #9ca3af; font-size: 13px; }
  a { color: #3b82f6; }
</style>
</head>
<body>
<div class="container">
  <a href="/" class="back-link">&larr; Back to ShiurPod</a>
  <h1>Support</h1>
  <p class="subtitle">Need help with ShiurPod? We're here to assist you.</p>

  <h2>Frequently Asked Questions</h2>

  <div class="faq-item">
    <h3>How do I follow a shiur?</h3>
    <p>Open any shiur page and tap the "Follow" button. You'll receive notifications when new episodes are published, and episodes can be auto-downloaded on WiFi.</p>
  </div>

  <div class="faq-item">
    <h3>How do I download episodes for offline listening?</h3>
    <p>Tap the download icon on any episode. You can manage your downloads from the Downloads tab. Auto-download on WiFi can be enabled in Settings.</p>
  </div>

  <div class="faq-item">
    <h3>Does ShiurPod require an account?</h3>
    <p>No. ShiurPod uses an anonymous device ID to save your preferences. No personal information is required.</p>
  </div>

  <div class="faq-item">
    <h3>How do I request a shiur to be added?</h3>
    <p>Use the contact form below or go to Settings &gt; Legal &gt; Contact in the app to submit a shiur request.</p>
  </div>

  <div class="faq-item">
    <h3>How do I delete my data?</h3>
    <p>Submit a data deletion request through the contact form below or through the in-app contact form. We'll process your request within 48 business hours.</p>
  </div>

  <div class="faq-item">
    <h3>I'm a content creator â€” how do I remove my feed?</h3>
    <p>Please submit a takedown request using the contact form below. We honor all valid requests within 48 business hours.</p>
  </div>

  <h2>Contact Us</h2>
  <p>Can't find what you're looking for? Send us a message and we'll get back to you.</p>

  <div class="contact-form">
    <div id="successMsg" class="success-msg">Your message has been sent successfully. We'll respond within 48 business hours.</div>
    <div id="errorMsg" class="error-msg">Something went wrong. Please try again later.</div>

    <div class="form-group">
      <label for="contactName">Name (optional)</label>
      <input type="text" id="contactName" placeholder="Your name">
    </div>
    <div class="form-group">
      <label for="contactEmail">Email (optional)</label>
      <input type="email" id="contactEmail" placeholder="your@email.com">
    </div>
    <div class="form-group">
      <label for="contactType">Topic</label>
      <select id="contactType">
        <option value="general">General Question</option>
        <option value="shiur_request">Shiur Request</option>
        <option value="technical_issue">Technical Issue</option>
        <option value="data_deletion">Data Deletion Request</option>
        <option value="content_takedown">Content Takedown Request</option>
        <option value="feedback">Feedback</option>
      </select>
    </div>
    <div class="form-group">
      <label for="contactMessage">Message *</label>
      <textarea id="contactMessage" placeholder="Describe your question or request..."></textarea>
    </div>
    <button class="submit-btn" id="submitBtn" onclick="submitContact()">Send Message</button>
  </div>

  <div class="footer">
    <p>&copy; 2026 ShiurPod. All rights reserved. | <a href="/privacy">Privacy Policy</a> | <a href="/terms">Terms of Service</a></p>
  </div>
</div>

<script>
async function submitContact() {
  const name = document.getElementById('contactName').value.trim();
  const email = document.getElementById('contactEmail').value.trim();
  const type = document.getElementById('contactType').value;
  const message = document.getElementById('contactMessage').value.trim();
  const btn = document.getElementById('submitBtn');
  const successMsg = document.getElementById('successMsg');
  const errorMsg = document.getElementById('errorMsg');

  successMsg.style.display = 'none';
  errorMsg.style.display = 'none';

  if (!message) {
    errorMsg.textContent = 'Please enter a message.';
    errorMsg.style.display = 'block';
    return;
  }

  btn.disabled = true;
  btn.textContent = 'Sending...';

  try {
    const res = await fetch('/api/feedback', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        deviceId: 'web-support-form',
        type: type,
        subject: type === 'data_deletion' ? 'Data Deletion Request' : type === 'content_takedown' ? 'Content Takedown Request' : 'Support: ' + (name || 'Anonymous'),
        message: message,
        contactInfo: email || undefined,
      }),
    });

    if (!res.ok) throw new Error('Failed');

    successMsg.style.display = 'block';
    document.getElementById('contactName').value = '';
    document.getElementById('contactEmail').value = '';
    document.getElementById('contactMessage').value = '';
    document.getElementById('contactType').value = 'general';
  } catch {
    errorMsg.textContent = 'Something went wrong. Please try again later.';
    errorMsg.style.display = 'block';
  } finally {
    btn.disabled = false;
    btn.textContent = 'Send Message';
  }
}
</script>
</body>
</html>
